!function(e,t,n,a){function o(e,t){var n=new RegExp("(?:^| )("+t+")(?: |$)"),a=(""+e).match(n);return a?a[1]:null}function r(e){p.debug&&console.log(e)}var s=null,i="",u="",l=0,c=0,d={},g={content:"#content",cacheRequests:!0,cacheExpiry:1,waitForImages:!0,debug:!1,testMode:!1},p=g,f=e("body"),h=(e("wpvars"),e(p.content));e(t).off("statechange").on("statechange",function(){var e=a.getState();r("Event.statechange: HTML5 History statechange event trigger with URL: "+e.url),i!==e.url?(r("Event.statechange: Calling the wpAjax.loadPage function with State.url as its parameter"),d.loadPage(e.url)):r("Event.statechange: User is already on the requested page to load. No request will be made.")}),d.configure=function(t){return r("configure: Setting options for Wpajax"),e.extend(g,t),d.getPluginClassVars(),this},d.getConfiguration=function(){return g},d.getCurrentUrl=function(){return r("getCurrentUrl: Getting the current browser address URL"),t.location.href},d.getPluginClassVars=function(){var e=f.attr("class");if(e){for(var t=e.split(" "),n=0,a=t.length;a>n;++n){var r=t[n];if(r&&r.indexOf("wpajax-")>-1){var s=o("wpajax-page-",r);console.log(s)}}console.log(t)}},d.trigger=function(e){r("trigger: Calling History.pushState which will trigger a statechange"),i=d.getCurrentUrl(),d.getTitle(e,function(t){a.pushState({},t,e)})},d.pageLimitReached=function(){return wpvars.max==wpvars.paged},d.getCurrentPageNumber=function(){return wpvars.paged},d.getMaxPages=function(){return wpvars.max},d.loadPage=function(t){if(r("loadPage: No other request is taking place, we are good to go"),!p.testMode){f.addClass("loading-page");var a=jQuery.Event("wpAjax.loading",{previousUrl:i,previousSlug:u,previousID:l,url:t});e(n).trigger(a),d.fadeOutContent(function(){d.doRequest(t,function(e){d.processRequest(e,t)},function(){if(!p.testMode){d.fadeInContent(),r("loadPage: Called doRequest and the request failed. Throwing a failed event on document");var a=jQuery.Event("wpAjax.failed",{url:t});e(n).trigger(a)}})}),r("loadPage: Loading class applied to body, loading event fired and content element faded out")}},d.fadeOutContent=function(e){r("fadeOutContent: Animating content element out"),0==arguments.length&&(e=function(){}),h.animate({opacity:0},800,e)},d.fadeInContent=function(e){r("fadeInContent: Animating content element in"),0==arguments.length&&(e=function(){}),h.animate({opacity:1},800,e)},d.getTitle=function(t,n){var a="";r("getTitle: Calling wpAjax.doRequest now to get the title"),d.doRequest(t,function(t){a=e(t).filter("title").text(),r("getTitle: doRequest AJAX call successful. Title returned: "+a+" "),e.isFunction(n)&&n(a)},function(){e.isFunction(n)&&n(a)})},d.doRequest=function(t,n,a){r("doRequest: About to perform an AJAX call"),s=e.ajax({url:t,localCache:p.cacheRequests,cacheTTL:p.cacheExpiry,type:"GET",dataType:"html",requestCount:++c,beforeSend:function(){null!==s&&s.abort()},success:function(e,t,a){r("doRequest: AJAX success callback"),c===this.requestCount&&n(e,t,a)},error:function(t,n,o){r("doRequest: AJAX error callback"),e.isFunction(a)&&a(t,n,o)}})},d.processRequest=function(t,a){var o=e(t);if(p.testMode)var s=o.find("body").html();else var s=o.find(p.content).html(),c=o.find("#wpvars").html();if(r("processRequest: Processing the data returned by a successful AJAX call"),s&&s.length){if(!p.testMode){e("#wpvars").remove();var g=n.createElement("script");g.id="wpvars",g.type="text/javascript",g.text=c,e("body").append(g)}var h=jQuery.Event("wpAjax.loaded",{previousUrl:i,previousSlug:u,previousID:l,content:t,url:a});e(n).trigger(h),r("processRequest: Content found from the AJAX request, determining what to do with it"),p.waitForImages?(r("processRequest Wait for images option is enabled, finding images"),e(s).find("img").length?(r("processRequest: We found images. Waiting for all images in the returned data to preload"),d.populateContent(s,function(t){r("processRequest: Populated the content element with content, about to preload iamges"),t.waitForImages(function(){r("processRequest: All images in AJAX loaded content have preloaded"),f.attr("class",o.filter("body").attr("class"));var a=jQuery.Event("wpAjax.complete",{contentEl:t});e(n).trigger(a)})})):d.populateContent(s,function(t){r("processRequest: Requested AJAX content has been added to the content element and classes changed"),f.attr("class",o.filter("body").attr("class"));var a=jQuery.Event("wpAjax.complete",{contentEl:t});e(n).trigger(a)})):d.populateContent(s,function(a){r("processRequest: Requested AJAX content has been added to the content element and classes changed"),f.attr("class",t.filter("body").attr("class"));var o=jQuery.Event("wpAjax.complete",{contentEl:a});e(n).trigger(o)}),d.fadeInContent()}else r("processRequest: Returned AJAX content is empty. Could be a problem server-side.")},d.populateContent=function(t,n){r("populateContent: About to populate the content element with returned HTML"),p.testMode||h.html(t),e.isFunction(n)&&(r("populateContent: We've added in the content, calling the callback function with the element as an argument"),n(h))},t.wpAjax=d}(jQuery,window,window.document,window.History),function(){jQuery.expr[":"].regex=function(e,t,n){var a=n[3].split(","),o=/^(data|css):/,r={method:a[0].match(o)?a[0].split(":")[0]:"attr",property:a.shift().replace(o,"")},s="ig",i=new RegExp(a.join("").replace(/^\s+|\s+$/g,""),s);return i.test(jQuery(e)[r.method](r.property))}}(jQuery);