!function(e,t,a,n){function o(e){d.debug&&console.log(e)}var r=null,s="",c="",i=0,u=0,l={},g={content:"#content",cacheRequests:!0,cacheExpiry:1,waitForImages:!0,debug:!1},d=g,p=e("body"),f=(e("wpvars"),e(d.content));e(t).off("statechange").on("statechange",function(){var e=n.getState();o("Event.statechange: HTML5 History statechange event trigger with URL: "+e.url),s!==e.url?(o("Event.statechange: Calling the wpAjax.loadPage function with State.url as its parameter"),l.loadPage(e.url)):o("Event.statechange: User is already on the requested page to load. No request will be made.")}),l.configure=function(t){return o("configure: Setting options for Wpajax"),e.extend(g,t),this},l.getConfiguration=function(){return g},l.getCurrentUrl=function(){return o("getCurrentUrl: Getting the current browser address URL"),t.location.href},l.trigger=function(t){o("trigger: Calling History.pushState which will trigger a statechange"),s=l.getCurrentUrl(),c=wpvars.pagename,i=wpvars.pageid;var r=jQuery.Event("wpAjax.pageleave-"+c);e(a).trigger(r),l.getTitle(t,function(e){n.pushState({},e,t)})},l.pageLimitReached=function(){return wpvars.max==wpvars.paged},l.getCurrentPageNumber=function(){return wpvars.paged},l.getMaxPages=function(){return wpvars.max},l.loadPage=function(t){o("loadPage: No other request is taking place, we are good to go"),e("body").addClass("loading-page");var n=jQuery.Event("wpAjax.loading",{previousUrl:s,previousSlug:c,previousID:i,url:t});e(a).trigger(n),l.fadeOutContent(function(){l.doRequest(t,function(e){l.processRequest(e,t)},function(){l.fadeInContent(),o("loadPage: Called doRequest and the request failed. Throwing a failed event on document");var n=jQuery.Event("wpAjax.failed",{url:t});e(a).trigger(n)})}),o("loadPage: Loading class applied to body, loading event fired and content element faded out")},l.fadeOutContent=function(e){o("fadeOutContent: Animating content element out"),0===arguments.length&&(e=function(){}),f.animate({opacity:0},800,e)},l.fadeInContent=function(e){o("fadeInContent: Animating content element in"),0===arguments.length&&(e=function(){}),f.animate({opacity:1},800,e)},l.getTitle=function(t,a){var n="";o("getTitle: Calling wpAjax.doRequest now to get the title"),l.doRequest(t,function(t){n=e(t).filter("title").text(),o("getTitle: doRequest AJAX call successful. Title returned: "+n+" "),e.isFunction(a)&&a(n)},function(){e.isFunction(a)&&a(n)})},l.doRequest=function(t,a,n){o("doRequest: About to perform an AJAX call"),r=e.ajax({url:t,localCache:d.cacheRequests,cacheTTL:d.cacheExpiry,type:"GET",dataType:"html",requestCount:++u,beforeSend:function(){null!==r&&r.abort()},success:function(e,t,n){o("doRequest: AJAX success callback"),u===this.requestCount&&a(e,t,n)},error:function(t,a,r){o("doRequest: AJAX error callback"),e.isFunction(n)&&n(t,a,r)}})},l.processRequest=function(t,n){var r=e(t),u=r.find(d.content).html(),g=r.filter("#wpvars").html();if(o("processRequest: Processing the data returned by a successful AJAX call"),u&&u.length){e("#wpvars").remove();var f=a.createElement("script");f.id="wpvars",f.type="text/javascript",f.text=g,p.append(f);var h=jQuery.Event("wpAjax.complete",{previousUrl:s,previousSlug:c,previousID:i,content:t,url:n,slug:wpvars.pagename,ID:wpvars.pageid}),m=jQuery.Event("wpAjax.pageload-"+wpvars.pagename);o("processRequest: Content found from the AJAX request, determining what to do with it"),d.waitForImages?(o("processRequest Wait for images option is enabled, finding images"),e(u).find("img").length?(o("processRequest: We found images. Waiting for all images in the returned data to preload"),l.populateContent(u,function(n){o("processRequest: Populated the content element with content, about to preload iamges"),n.waitForImages(function(){o("processRequest: All images in AJAX loaded content have preloaded"),p.attr("class",t.match(/body class=\"(.*?)\"/)[1]),e(a).trigger(h),e(a).trigger(m)})})):l.populateContent(u,function(){o("processRequest: Requested AJAX content has been added to the content element and classes changed"),p.attr("class",t.match(/body class=\"(.*?)\"/)[1]),e(a).trigger(h),e(a).trigger(m)})):l.populateContent(u,function(){o("processRequest: Requested AJAX content has been added to the content element and classes changed"),e("body").attr("class",t.match(/body class=\"(.*?)\"/)[1]),e(a).trigger(h),e(a).trigger(m)}),l.fadeInContent()}else o("processRequest: Returned AJAX content is empty. Could be a problem server-side.")},l.populateContent=function(t,a){o("populateContent: About to populate the content element with returned HTML"),f.html(t),e.isFunction(a)&&(o("populateContent: We've added in the content, calling the callback function with the element as an argument"),a(f))},t.wpAjax=l}(jQuery,window,window.document,window.History),function(){jQuery.expr[":"].regex=function(e,t,a){var n=a[3].split(","),o=/^(data|css):/,r={method:n[0].match(o)?n[0].split(":")[0]:"attr",property:n.shift().replace(o,"")},s="ig",c=new RegExp(n.join("").replace(/^\s+|\s+$/g,""),s);return c.test(jQuery(e)[r.method](r.property))}}(jQuery),function(e){e.ajaxPrefilter(function(e,t,a){function n(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}if(n()&&e.localCache){var o=e.cacheTTL||5,r=e.cacheKey||e.url.replace(/jQuery.*/,"")+e.type+(e.data||"");e.isCacheValid&&!e.isCacheValid()&&localStorage.removeItem(r);var s=localStorage.getItem(r+"cachettl");s&&s<+new Date&&(localStorage.removeItem(r),localStorage.removeItem(r+"cachettl"),s="expired");var c=localStorage.getItem(r);c?(0===e.dataType.indexOf("json")&&(c=JSON.parse(c)),e.success(c),a.abort()):(e.success&&(e.realsuccess=e.success),e.success=function(t){var a=t;0===this.dataType.indexOf("json")&&(a=JSON.stringify(t));try{localStorage.setItem(r,a)}catch(n){localStorage.removeItem(r),localStorage.removeItem(r+"cachettl"),e.cacheError&&e.cacheError(n,r,a)}e.realsuccess&&e.realsuccess(t)},s&&"expired"!==s||localStorage.setItem(r+"cachettl",+new Date+36e5*o))}})}(jQuery);